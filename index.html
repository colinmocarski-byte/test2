<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brickly - Finde profitable Investments</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Zus√§tzliche Styles f√ºr fehlende Elemente */
        .filter-info {
            background: white;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: none;
        }
        
        .filter-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .active-filters {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .filter-label {
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
        }
        
        .filter-tag {
            background: #f1f5f9;
            color: #475569;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }
        
        .cashflow-tag {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            font-weight: 600;
        }
        
        .clear-filters {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .clear-filters:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }
        
        .loading-spinner {
            text-align: center;
            padding: 60px;
            color: #64748b;
        }
        
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        
        /* Modal Styles */
        .detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            overflow-y: auto;
        }
        
        .modal-content {
            max-width: 1200px;
            margin: 40px auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #ef4444;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .close-modal:hover {
            background: #dc2626;
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="logo">
                <span style="font-size: 24px; font-weight: 700; color: #3b83f6;">Brickly</span>
            </div>
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="immobilienkalkulator">Immobilienkalkulator</button>
                <button class="nav-tab" data-tab="top-empfehlungen">Top-Empfehlungen</button>
                <button class="nav-tab" data-tab="ones-to-watch">Ones to Watch</button>
                <button class="nav-tab" data-tab="swipen">Swipen</button>
                <button class="nav-tab" data-tab="heat-map">Heat Map</button>
                <button class="nav-tab" data-tab="profil">Profil</button>
            </div>
        </div>
    </nav>

    <!-- Immobilienkalkulator Tab -->
    <div class="tab-content" id="immobilienkalkulator">
        <!-- Search Section -->
        <section class="search-section">
            <div class="search-container">
                <h1 class="search-title">Finde Immobilien nach Cashflow</h1>
                <p class="search-subtitle">Nicht der Preis z√§hlt, sondern was am Ende √ºbrig bleibt!</p>
                
                <div class="search-grid">
                    <div class="search-field">
                        <label>Stadt</label>
                        <input type="text" id="stadt" placeholder="z.B. Berlin, M√ºnchen, Hamburg" value="Berlin">
                    </div>
                    
                    <div class="search-field">
                        <label>Radius (km)</label>
                        <input type="number" id="radius" placeholder="z.B. 25" value="50">
                    </div>
                    
                    <div class="search-field">
                        <label>Lage (A-E)</label>
                        <select id="lage">
                            <option value="">Alle Lagen</option>
                            <option value="A">A - Top Lage</option>
                            <option value="B">B - Sehr gute Lage</option>
                            <option value="C">C - Gute Lage</option>
                            <option value="D">D - Mittlere Lage</option>
                            <option value="E">E - Einfache Lage</option>
                        </select>
                    </div>
                    
                    <div class="search-field">
                        <label>Eigenkapital (‚Ç¨)</label>
                        <input type="number" id="eigenkapital" placeholder="z.B. 50000" value="100000">
                    </div>
                    
                    <div class="search-field">
    <label>Mindest-Cashflow (‚Ç¨/Monat)</label>
    <input type="number" id="mindest-cashflow" placeholder="z.B. 300" value="200" 
           style="background: white; color: black; font-size: 16px; font-weight: 500;">
</div>
                </div>
                
                <button class="search-button" onclick="searchByCashflow()">
                    <span class="button-icon"></span>
                    Nach Cashflow suchen
                </button>
            </div>
        </section>

        <!-- Filter Info Bar -->
        <div class="filter-info" id="filterInfo">
            <div class="filter-container">
                <div class="active-filters">
                    <span class="filter-label">Aktive Filter:</span>
                    <span class="filter-tag" id="stadtFilter">Alle St√§dte</span>
                    <span class="filter-tag" id="lageFilter">Alle Lagen</span>
                    <span class="filter-tag" id="ekFilter">EK: 100.000 ‚Ç¨</span>
                    <span class="filter-tag cashflow-tag" id="cashflowFilter">Min. 200 ‚Ç¨/Monat</span>
                </div>
                <button class="clear-filters" onclick="clearFilters()">Filter zur√ºcksetzen</button>
            </div>
        </div>

        <!-- Results Section -->
        <section class="results-section" id="resultsSection" style="display: none;">
            <div class="results-header">
                <h3 class="results-count">
                    <span id="resultCount">0</span> Immobilien mit <span id="minCashflowDisplay">0</span>‚Ç¨+ Cashflow gefunden
                </h3>
                <div class="sort-options">
                    <select class="sort-dropdown" onchange="sortResults(this.value)">
                        <option value="cashflow-desc">Cashflow (h√∂chste zuerst)</option>
                        <option value="cashflow-asc">Cashflow (niedrigste zuerst)</option>
                        <option value="rendite-desc">Rendite (h√∂chste zuerst)</option>
                        <option value="preis-asc">Kaufpreis (niedrigste zuerst)</option>
                        <option value="preis-desc">Kaufpreis (h√∂chste zuerst)</option>
                    </select>
                </div>
            </div>
            
            <div class="property-list" id="propertyList">
                <!-- Results will be added here dynamically -->
            </div>
        </section>
    </div>

    <!-- Top-Empfehlungen Tab -->
<div class="tab-content" id="top-empfehlungen" style="display: none;">
    <div style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); padding: 60px 20px;">
        <div style="max-width: 1400px; margin: 0 auto;">
            <h1 style="color: white; text-align: center; font-size: 36px; margin-bottom: 10px; font-weight: 700; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                 Top-Empfehlungen Deutschland
            </h1>
            <p style="color: rgba(255,255,255,0.9); text-align: center; font-size: 18px; margin-bottom: 40px;">
                Die profitabelsten A- und B-Lagen aus ganz Deutschland
            </p>
            
            <!-- Eigenkapital Eingabe -->
            <div style="max-width: 400px; margin: 0 auto;">
                <label style="color: white; font-size: 14px; font-weight: 600; display: block; margin-bottom: 8px;">
                    Ihr Eigenkapital (0 ‚Ç¨ = 100% Finanzierung)
                </label>
                <div style="display: flex; gap: 10px;">
                    <input 
                        type="number" 
                        id="top-eigenkapital" 
                        placeholder="z.B. 50000" 
                        value="0"
                        style="flex: 1; padding: 12px; border: none; border-radius: 8px; font-size: 16px;"
                    >
                    <button 
                        onclick="loadTopEmpfehlungen()" 
                        style="background: #10b981; color: white; border: none; padding: 12px 30px; border-radius: 8px; font-weight: 600; cursor: pointer;"
                    >
                        Neu berechnen
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div style="max-width: 1400px; margin: 40px auto; padding: 0 20px;">
        <div id="topRecommendations">
            <!-- Wird dynamisch gef√ºllt -->
        </div>
    </div>
</div>
<!-- Ones to Watch Tab -->
<div class="tab-content" id="ones-to-watch" style="display: none;">
    <div style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); padding: 50px 20px;">
        <div style="max-width: 1000px; margin: 0 auto;">
            <h1 style="color: white; text-align: center; font-size: 36px; margin-bottom: 10px; font-weight: 700; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                Stadtteile mit verstecktem Potenzial
            </h1>
            <p style="color: rgba(255,255,255,0.9); text-align: center; font-size: 18px;">
                D- und E-Lagen vor dem Durchbruch - f√ºr Investoren mit Weitblick
            </p>
        </div>
    </div>
</div>
 <div style="max-width: 1000px; margin: 40px auto; padding: 0 20px;">
        <!-- Stadtteil-Liste - WICHTIG: display: none als Standard -->
        <div id="stadtteilList" style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.08); display: none;">
            <!-- Wird dynamisch gef√ºllt -->
        </div>
        
        <!-- Immobilien-Liste (anfangs versteckt) -->
        <div id="stadtteilProperties" style="display: none;">
            <button onclick="backToStadtteilList()" style="
                background: #3b82f6;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 8px;
                margin-bottom: 30px;
                cursor: pointer;
                font-weight: 600;
                transition: all 0.3s ease;
            " onmouseover="this.style.background='#2563eb'" onmouseout="this.style.background='#3b82f6'">
                ‚Üê Zur√ºck zur Liste
            </button>
            <h2 id="selectedStadtteilTitle" style="color:white;margin-bottom: 25px;font-size:28px;"></h2>
            <div class="property-list" id="watchList">
                <!-- Wird dynamisch gef√ºllt -->
            </div>
        </div>
    </div>
</div>

<!-- Swipen Tab -->
<div class="tab-content" id="swipen" style="display: none;">
    <!-- Im Swipen Tab, direkt nach dem √∂ffnenden div -->
<div id="swipeBudgetBox" style="
    position: fixed;
    top: 100px;
    right: 30px;
    background: linear-gradient(135deg, #d1fae5, #a7f3d0);
    border: 3px solid #10b981;
    border-radius: 16px;
    padding: 20px 25px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    z-index: 100;
    text-align: center;
">
    <div style="font-size: 13px; color: #065f46; font-weight: 600;">BUDGET</div>
    <div id="swipeBudgetAmount" style="font-size: 26px; font-weight: 700; color: #10b981;">‚Ç¨500</div>
</div>
    <!-- Budget Box in der Ecke -->
    <div id="swipeBudgetBox" style="
        position: fixed;
        top: 100px;
        right: 30px;
        background: linear-gradient(135deg, #d1fae5, #a7f3d0);
        border: 3px solid #10b981;
        border-radius: 16px;
        padding: 20px 25px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        z-index: 100;
        min-width: 200px;
        text-align: center;
    ">
        <div style="font-size: 14px; color: #065f46; font-weight: 600; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">
            Budget
        </div>
        <div id="budgetAmount" style="font-size: 28px; font-weight: 700; color: #059669;">
            ‚Ç¨500
        </div>
        <div style="font-size: 12px; color: #047857; margin-top: 5px; opacity: 0.8;">
            Nach Immobilien
        </div>
    </div>
    
    <div class="swipe-container">
        <h2>Swipe f√ºr Cashflow</h2>
        <p class="section-description">‚Üê Links f√ºr Skip | Rechts f√ºr Portfolio ‚Üí</p>
        
        <div class="swipe-card-container">
            <div class="swipe-card" id="swipeCard">
                <!-- Wird dynamisch gef√ºllt -->
            </div>
        </div>
        
        <div class="swipe-buttons">
            <button class="swipe-btn reject" onclick="swipeLeft()">‚úï</button>
            <button class="swipe-btn info" onclick="showSwipeDetails()">‚Ñπ</button>
            <button class="swipe-btn accept" onclick="swipeRight()">‚ô•</button>
        </div>
    </div>
</div>

<!-- Heat Map Tab -->
<div class="tab-content" id="heat-map" style="display: none;">
    <iframe src="heatmap.html" style="width: 100%; height: calc(100vh - 60px); border: none;"></iframe>
</div>

    

<!-- Profil Tab -->
<div class="tab-content" id="profil" style="display: none;">
    <div class="content-container">
        <div class="profile-header">
            <div class="profile-avatar">üë§</div>
            <h2>Mein Profil</h2>
        </div>
        
        <!-- Erste Reihe: Stats -->
        <div class="profile-stats" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px;">
            <div class="stat-card">
                <div class="stat-value" id="totalProperties">0</div>
                <div class="stat-label">Analysierte Objekte</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgCashflow">‚Ç¨0</div>
                <div class="stat-label">√ò Cashflow</div>
            </div>
            <div class="stat-card" onclick="showSavedProperties()" style="cursor: pointer;">
                <div class="stat-value" id="savedProperties">0</div>
                <div class="stat-label">Gespeicherte Immobilien</div>
                <div style="font-size: 11px; color: #94a3b8; margin-top: 5px;">Klicken zum Anzeigen</div>
            </div>
        </div>
        
        <!-- Zweite Reihe: Settings -->
        <div class="profile-settings" style="background: #f8fafc; padding: 30px; border-radius: 12px;">
            <h3 style="color: #1e293b; margin-bottom: 20px;">Meine Suchkriterien</h3>
            
            <!-- Im Profil Tab - Settings Grid -->
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
    <div class="setting-item">
        <label>üí∞ Eigenkapital (f√ºr Cashflow):</label>
        <input type="number" id="profileEigenkapital">
    </div>
    <div class="setting-item">
        <label>üìÖ Monatliches Budget:</label>
        <input type="number" id="profileMonthlyBudget">
    </div>
    <div class="setting-item">
        <label>üìç Bevorzugte Stadt:</label>
        <select id="profileStadt">
            <option value="Berlin">Berlin</option>
            <option value="M√ºnchen">M√ºnchen</option>
            <option value="Hamburg">Hamburg</option>
        </select>
    </div>
</div>
            
            <button class="save-settings" onclick="saveProfileSettings()">Einstellungen speichern</button>
        </div>
    </div>
</div>
         


    <!-- Detail Modal (wird dynamisch eingef√ºgt) -->
    <div id="detailModal" class="detail-modal"></div>

    <script src="js/calculator.js"></script>
    <script src="js/navigation.js"></script>
</body>
</html>

